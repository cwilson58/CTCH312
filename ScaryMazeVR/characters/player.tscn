[gd_scene load_steps=26 format=3 uid="uid://di3vke8xgrrl1"]

[ext_resource type="PackedScene" uid="uid://njx823gyk04n" path="res://addons/godot-xr-tools/hands/scenes/highpoly/left_hand.tscn" id="1_biufw"]
[ext_resource type="Environment" uid="uid://bk6g6m63ia8i1" path="res://maps/spooky_fog_environment.tres" id="1_fyx2x"]
[ext_resource type="Script" path="res://characters/player.gd" id="1_m5rki"]
[ext_resource type="PackedScene" uid="uid://raeeicvvindd" path="res://addons/godot-xr-tools/hands/scenes/highpoly/right_hand.tscn" id="2_y7hhr"]
[ext_resource type="PackedScene" uid="uid://137mldit0te1" path="res://interactables/player_interactor.tscn" id="3_dlwa4"]
[ext_resource type="PackedScene" uid="uid://b4ysuy43poobf" path="res://addons/godot-xr-tools/functions/function_pickup.tscn" id="3_dxj2a"]
[ext_resource type="PackedScene" uid="uid://bl2nuu3qhlb5k" path="res://addons/godot-xr-tools/functions/movement_direct.tscn" id="3_grfjy"]
[ext_resource type="PackedScene" uid="uid://cqhw276realc" path="res://addons/godot-xr-tools/functions/function_pointer.tscn" id="3_j1oh4"]
[ext_resource type="PackedScene" uid="uid://b6bk2pj8vbj28" path="res://addons/godot-xr-tools/functions/movement_turn.tscn" id="4_rrn2f"]
[ext_resource type="PackedScene" uid="uid://diyu06cw06syv" path="res://addons/godot-xr-tools/player/player_body.tscn" id="5_kigyv"]
[ext_resource type="AudioStream" uid="uid://dorcq7cvye13" path="res://assets/sfx/dragon-roar-96996.mp3" id="10_knekr"]
[ext_resource type="Script" path="res://characters/Monster.gd" id="12_wjpn8"]
[ext_resource type="PackedScene" uid="uid://d1r4dkdxe86v8" path="res://assets/monsters/skin_reaver.tscn" id="13_3sxkq"]
[ext_resource type="AudioStream" uid="uid://bgldi6rcuatpt" path="res://assets/sfx/MonsterLine1.mp3" id="14_hxikk"]
[ext_resource type="AudioStream" uid="uid://c4xie4urp3r5u" path="res://assets/sfx/MonsterLine2.mp3" id="15_fc4sx"]
[ext_resource type="AudioStream" uid="uid://c0esjgogmwoai" path="res://assets/sfx/MonsterLine3.mp3" id="16_40otp"]
[ext_resource type="AudioStream" uid="uid://c5aeucsjnh3dg" path="res://assets/sfx/eating-juicy-meat-7024.mp3" id="17_aevfh"]

[sub_resource type="CameraAttributesPractical" id="CameraAttributesPractical_xw4nr"]
dof_blur_far_distance = 0.22
dof_blur_far_transition = 4.0

[sub_resource type="BoxShape3D" id="BoxShape3D_sp04e"]
size = Vector3(1, 1.32855, 3.08932)

[sub_resource type="CapsuleShape3D" id="CapsuleShape3D_4dtli"]
margin = 0.01
radius = 0.1
height = 0.5

[sub_resource type="AudioStreamRandomizer" id="AudioStreamRandomizer_7hop2"]
streams_count = 3
stream_0/stream = ExtResource("14_hxikk")
stream_0/weight = 1.0
stream_1/stream = ExtResource("15_fc4sx")
stream_1/weight = 1.0
stream_2/stream = ExtResource("16_40otp")
stream_2/weight = 1.0

[sub_resource type="BoxShape3D" id="BoxShape3D_nwc3h"]
size = Vector3(0.1, 0.1, 0.1)

[sub_resource type="Animation" id="Animation_cs44j"]
length = 0.001
tracks/0/type = "value"
tracks/0/imported = false
tracks/0/enabled = true
tracks/0/path = NodePath("Monster:position")
tracks/0/interp = 1
tracks/0/loop_wrap = true
tracks/0/keys = {
"times": PackedFloat32Array(0),
"transitions": PackedFloat32Array(1),
"update": 0,
"values": [Vector3(0.198, -2.113, -5)]
}
tracks/1/type = "value"
tracks/1/imported = false
tracks/1/enabled = true
tracks/1/path = NodePath("Camera:attributes:dof_blur_far_enabled")
tracks/1/interp = 1
tracks/1/loop_wrap = true
tracks/1/keys = {
"times": PackedFloat32Array(0),
"transitions": PackedFloat32Array(1),
"update": 1,
"values": [false]
}
tracks/2/type = "value"
tracks/2/imported = false
tracks/2/enabled = true
tracks/2/path = NodePath("Monster:visible")
tracks/2/interp = 1
tracks/2/loop_wrap = true
tracks/2/keys = {
"times": PackedFloat32Array(0),
"transitions": PackedFloat32Array(1),
"update": 1,
"values": [false]
}
tracks/3/type = "value"
tracks/3/imported = false
tracks/3/enabled = true
tracks/3/path = NodePath("Camera:environment:volumetric_fog_density")
tracks/3/interp = 1
tracks/3/loop_wrap = true
tracks/3/keys = {
"times": PackedFloat32Array(0),
"transitions": PackedFloat32Array(1),
"update": 0,
"values": [0.15]
}
tracks/4/type = "value"
tracks/4/imported = false
tracks/4/enabled = true
tracks/4/path = NodePath("Camera:environment:adjustment_brightness")
tracks/4/interp = 1
tracks/4/loop_wrap = true
tracks/4/keys = {
"times": PackedFloat32Array(0),
"transitions": PackedFloat32Array(1),
"update": 0,
"values": [1.0]
}
tracks/5/type = "value"
tracks/5/imported = false
tracks/5/enabled = true
tracks/5/path = NodePath("Monster/Roar:volume_db")
tracks/5/interp = 1
tracks/5/loop_wrap = true
tracks/5/keys = {
"times": PackedFloat32Array(0),
"transitions": PackedFloat32Array(1),
"update": 0,
"values": [-30.111]
}
tracks/6/type = "value"
tracks/6/imported = false
tracks/6/enabled = true
tracks/6/path = NodePath("Camera:environment:adjustment_enabled")
tracks/6/interp = 1
tracks/6/loop_wrap = true
tracks/6/keys = {
"times": PackedFloat32Array(0),
"transitions": PackedFloat32Array(1),
"update": 1,
"values": [false]
}
tracks/7/type = "value"
tracks/7/imported = false
tracks/7/enabled = true
tracks/7/path = NodePath("Camera:rotation")
tracks/7/interp = 1
tracks/7/loop_wrap = true
tracks/7/keys = {
"times": PackedFloat32Array(0),
"transitions": PackedFloat32Array(1),
"update": 0,
"values": [Vector3(0, 0, 0)]
}

[sub_resource type="Animation" id="Animation_vk0k0"]
resource_name = "player_caught"
length = 6.0
tracks/0/type = "value"
tracks/0/imported = false
tracks/0/enabled = true
tracks/0/path = NodePath("Monster:position")
tracks/0/interp = 1
tracks/0/loop_wrap = true
tracks/0/keys = {
"times": PackedFloat32Array(0, 0.4, 1.5, 2),
"transitions": PackedFloat32Array(1, 1, 1, 1),
"update": 0,
"values": [Vector3(0.198, -1, -5), Vector3(0.198, -1, -8), Vector3(0.198, -1, -3), Vector3(0.198, -1, -2.3)]
}
tracks/1/type = "value"
tracks/1/imported = false
tracks/1/enabled = true
tracks/1/path = NodePath("Camera:attributes:dof_blur_far_enabled")
tracks/1/interp = 1
tracks/1/loop_wrap = true
tracks/1/keys = {
"times": PackedFloat32Array(0, 6),
"transitions": PackedFloat32Array(1, 1),
"update": 1,
"values": [true, false]
}
tracks/2/type = "value"
tracks/2/imported = false
tracks/2/enabled = true
tracks/2/path = NodePath("Monster:visible")
tracks/2/interp = 1
tracks/2/loop_wrap = true
tracks/2/keys = {
"times": PackedFloat32Array(0, 0.4, 6),
"transitions": PackedFloat32Array(1, 1, 1),
"update": 1,
"values": [false, true, false]
}
tracks/3/type = "value"
tracks/3/imported = false
tracks/3/enabled = true
tracks/3/path = NodePath("Camera:environment:volumetric_fog_density")
tracks/3/interp = 1
tracks/3/loop_wrap = true
tracks/3/keys = {
"times": PackedFloat32Array(0, 0.3, 5.7, 6),
"transitions": PackedFloat32Array(1, 1, 1, 1),
"update": 0,
"values": [0.15, 0.8, 0.8, 0.15]
}
tracks/4/type = "animation"
tracks/4/imported = false
tracks/4/enabled = true
tracks/4/path = NodePath("Monster/skin_reaver/AnimationPlayer")
tracks/4/interp = 1
tracks/4/loop_wrap = true
tracks/4/keys = {
"clips": PackedStringArray("crawl", "neck_bite_animations/bite"),
"times": PackedFloat32Array(0.8, 2)
}
tracks/5/type = "value"
tracks/5/imported = false
tracks/5/enabled = true
tracks/5/path = NodePath("Camera:environment:adjustment_brightness")
tracks/5/interp = 1
tracks/5/loop_wrap = true
tracks/5/keys = {
"times": PackedFloat32Array(0, 0.3, 0.9, 1.3, 1.8, 2.8, 3.3, 4.4),
"transitions": PackedFloat32Array(1, 1, 1, 1, 1, 1, 1, 1),
"update": 0,
"values": [1.0, 0.01, 0.01, 1.0, 0.01, 0.01, 1.0, 0.01]
}
tracks/6/type = "audio"
tracks/6/imported = false
tracks/6/enabled = true
tracks/6/path = NodePath("Monster/Roar")
tracks/6/interp = 1
tracks/6/loop_wrap = true
tracks/6/keys = {
"clips": [{
"end_offset": 0.0,
"start_offset": 0.0,
"stream": ExtResource("10_knekr")
}, {
"end_offset": 14.1945,
"start_offset": 0.0,
"stream": ExtResource("17_aevfh")
}],
"times": PackedFloat32Array(0, 2.41)
}
tracks/6/use_blend = true
tracks/7/type = "value"
tracks/7/imported = false
tracks/7/enabled = true
tracks/7/path = NodePath("Monster/Roar:volume_db")
tracks/7/interp = 1
tracks/7/loop_wrap = true
tracks/7/keys = {
"times": PackedFloat32Array(3.5, 5.6),
"transitions": PackedFloat32Array(1, 1),
"update": 0,
"values": [0.0, -50.0]
}
tracks/8/type = "value"
tracks/8/imported = false
tracks/8/enabled = true
tracks/8/path = NodePath("Camera:environment:adjustment_enabled")
tracks/8/interp = 1
tracks/8/loop_wrap = true
tracks/8/keys = {
"times": PackedFloat32Array(0, 6),
"transitions": PackedFloat32Array(1, 1),
"update": 1,
"values": [true, false]
}
tracks/9/type = "value"
tracks/9/imported = false
tracks/9/enabled = true
tracks/9/path = NodePath("Camera:rotation")
tracks/9/interp = 1
tracks/9/loop_wrap = true
tracks/9/keys = {
"times": PackedFloat32Array(0),
"transitions": PackedFloat32Array(1),
"update": 0,
"values": [Vector3(0, 0, 0)]
}
tracks/10/type = "method"
tracks/10/imported = false
tracks/10/enabled = true
tracks/10/path = NodePath(".")
tracks/10/interp = 1
tracks/10/loop_wrap = true
tracks/10/keys = {
"times": PackedFloat32Array(5.5),
"transitions": PackedFloat32Array(1),
"values": [{
"args": [],
"method": &"teleport_spawn"
}]
}

[sub_resource type="AnimationLibrary" id="AnimationLibrary_abcip"]
_data = {
"RESET": SubResource("Animation_cs44j"),
"player_caught": SubResource("Animation_vk0k0")
}

[node name="Player" type="XROrigin3D" groups=["monster_visible"]]
script = ExtResource("1_m5rki")

[node name="AudioListener3D" type="AudioListener3D" parent="."]

[node name="Camera" type="XRCamera3D" parent="."]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 0, 1, 0)
environment = ExtResource("1_fyx2x")
attributes = SubResource("CameraAttributesPractical_xw4nr")
current = true

[node name="PlayerInteractor" parent="Camera" node_paths=PackedStringArray("player") instance=ExtResource("3_dlwa4")]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 0, -1, 0)
player = NodePath("../..")

[node name="CollisionShape3D" parent="Camera/PlayerInteractor" index="0"]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 0, 0.656178, -1.22545)
shape = SubResource("BoxShape3D_sp04e")

[node name="SpotLight3D" type="SpotLight3D" parent="Camera"]
visible = false
light_color = Color(1, 1, 0.745098, 1)
light_energy = 1.5
light_volumetric_fog_energy = 1.5
shadow_enabled = true

[node name="LeftController" type="XRController3D" parent="."]
tracker = &"left_hand"

[node name="LeftHand" parent="LeftController" instance=ExtResource("1_biufw")]

[node name="FunctionPickup" parent="LeftController" instance=ExtResource("3_dxj2a")]

[node name="FunctionPointer" parent="LeftController" instance=ExtResource("3_j1oh4")]
show_laser = 2
laser_length = 1
show_target = true

[node name="RightController" type="XRController3D" parent="."]
tracker = &"right_hand"

[node name="RightHand" parent="RightController" instance=ExtResource("2_y7hhr")]

[node name="MovementDirect" parent="RightController/RightHand" instance=ExtResource("3_grfjy")]
strafe = true

[node name="MovementTurn" parent="RightController/RightHand" instance=ExtResource("4_rrn2f")]
turn_mode = 2

[node name="FunctionPickup" parent="RightController" instance=ExtResource("3_dxj2a")]

[node name="FunctionPointer" parent="RightController" instance=ExtResource("3_j1oh4")]
show_laser = 2
laser_length = 1
show_target = true

[node name="PlayerBody" parent="." instance=ExtResource("5_kigyv")]

[node name="CollisionShape3D" type="CollisionShape3D" parent="PlayerBody"]
shape = SubResource("CapsuleShape3D_4dtli")

[node name="AudioStreamPlayer3D" type="AudioStreamPlayer3D" parent="."]
stream = ExtResource("10_knekr")

[node name="Monster" type="CharacterBody3D" parent="."]
transform = Transform3D(-1, 0, -8.74228e-08, 0, 1, 0, 8.74228e-08, 0, -1, 0.198, -2.113, -5)
visible = false
script = ExtResource("12_wjpn8")
can_detect = false

[node name="skin_reaver" parent="Monster" instance=ExtResource("13_3sxkq")]
transform = Transform3D(-2, 0, -1.74846e-07, 0, 2, 0, 1.74846e-07, 0, -2, 0, 0, 0)

[node name="GeneralSkeleton" parent="Monster/skin_reaver/Armature_001" index="0"]
bones/0/position = Vector3(0.048675, 0.984381, -0.0151993)
bones/0/rotation = Quaternion(0.0785339, -0.117796, -0.0244248, 0.989626)
bones/1/rotation = Quaternion(0.0637299, -0.00559617, -0.00310889, 0.997947)
bones/2/rotation = Quaternion(0.0507529, -0.00889974, 0.00388811, 0.998664)
bones/3/rotation = Quaternion(0.0508337, -0.00852327, 0.00416686, 0.998662)
bones/4/rotation = Quaternion(-0.0356855, 0.0207812, -0.0279622, 0.998756)
bones/5/rotation = Quaternion(-0.203106, 0.0713552, -0.0373443, 0.975839)
bones/7/rotation = Quaternion(0.707107, 0, 0, 0.707107)
bones/8/rotation = Quaternion(0.707107, 0, 0, 0.707107)
bones/9/position = Vector3(-1.43051e-08, -0.0216731, 0.0385261)
bones/10/rotation = Quaternion(0, 0.707107, 0.707107, 0)
bones/11/rotation = Quaternion(0.545752, 0.447257, 0.529672, -0.470705)
bones/12/rotation = Quaternion(0.241444, 0.917158, -0.3161, 0.0246398)
bones/13/rotation = Quaternion(0.436406, -0.600822, 0.437711, 0.506924)
bones/14/rotation = Quaternion(-0.0297166, 0.763459, 0.206553, 0.611215)
bones/15/rotation = Quaternion(-0.0471582, 0.0079987, -0.0356484, 0.998219)
bones/16/rotation = Quaternion(-0.155987, 0.717033, 0.221586, 0.642209)
bones/17/rotation = Quaternion(0.235251, 0.162035, 0.199827, 0.937268)
bones/18/rotation = Quaternion(0, -5.96046e-08, -2.98023e-08, 1)
bones/19/rotation = Quaternion(0.111612, -0.0933834, 0.0272704, 0.988979)
bones/20/rotation = Quaternion(0.193395, -0.00316417, -0.026106, 0.980769)
bones/21/rotation = Quaternion(0.303756, -0.0018324, -0.0399564, 0.95191)
bones/22/rotation = Quaternion(0, 0, 5.96046e-08, 1)
bones/23/position = Vector3(4.6799e-08, 0.181405, 1.69064e-07)
bones/23/rotation = Quaternion(0.0609467, -0.012295, -0.0250717, 0.99775)
bones/24/rotation = Quaternion(0.407616, -0.0111083, -0.0505246, 0.911687)
bones/25/rotation = Quaternion(0.164044, -0.00593369, -0.0215278, 0.9862)
bones/26/rotation = Quaternion(0, 0, 5.96046e-08, 1)
bones/27/position = Vector3(0.0370945, 0.17515, -0.0058146)
bones/27/rotation = Quaternion(-0.0492231, 0.0302973, -0.141374, 0.988267)
bones/28/rotation = Quaternion(0.224094, -0.00686161, -0.0297141, 0.97409)
bones/29/rotation = Quaternion(0.295104, -0.00405487, -0.0381639, 0.954694)
bones/30/rotation = Quaternion(0, 0, 5.96046e-08, 1)
bones/31/position = Vector3(0.0739349, 0.170442, -0.00454509)
bones/31/rotation = Quaternion(0.054711, 0.0684707, -0.184217, 0.97897)
bones/32/rotation = Quaternion(0.229432, -0.0053907, -0.0312467, 0.972808)
bones/33/rotation = Quaternion(0.388237, -0.00295448, -0.0509461, 0.920146)
bones/34/rotation = Quaternion(0, 0, 5.96046e-08, 1)
bones/35/rotation = Quaternion(0.498485, -0.48391, -0.556052, -0.456236)
bones/36/rotation = Quaternion(-0.13509, 0.888431, -0.43634, -0.0452533)
bones/37/rotation = Quaternion(0.461706, 0.589139, -0.492124, 0.444474)
bones/38/rotation = Quaternion(0.127731, -0.795891, -0.0350757, 0.590773)
bones/39/rotation = Quaternion(-0.152813, 0.101859, -0.125222, 0.974983)
bones/40/rotation = Quaternion(0.0118778, -0.822948, 0.026442, 0.567377)
bones/41/rotation = Quaternion(-0.182911, 0.033557, -0.022317, 0.982303)
bones/42/rotation = Quaternion(1.49012e-08, -1.49012e-08, -8.9407e-08, 1)
bones/43/rotation = Quaternion(-0.113141, -0.00467355, 0.0271854, 0.993196)
bones/44/rotation = Quaternion(0.356908, 0.00328309, 0.0471973, 0.932941)
bones/45/rotation = Quaternion(0.0881805, 0.00175114, 0.0118433, 0.996033)
bones/47/rotation = Quaternion(-0.0122065, 0.0114044, 0.0395634, 0.999077)
bones/48/rotation = Quaternion(0.448544, 0.011178, 0.0542764, 0.892041)
bones/49/rotation = Quaternion(0.322805, 0.0051426, 0.0402489, 0.945595)
bones/51/rotation = Quaternion(0.194219, 0.020625, 0.0663551, 0.978494)
bones/52/rotation = Quaternion(0.101984, 0.00683206, 0.0148588, 0.994652)
bones/53/rotation = Quaternion(0.065958, 0.00332626, 0.00926612, 0.997774)
bones/55/rotation = Quaternion(0.272359, 0.019791, 0.087707, 0.957986)
bones/56/rotation = Quaternion(0.417742, 0.00558502, 0.0550755, 0.906878)
bones/57/rotation = Quaternion(0.273511, 0.00188844, 0.0355048, 0.961212)
bones/59/rotation = Quaternion(0.118906, 0.406399, 0.892044, -0.157983)
bones/60/rotation = Quaternion(-0.0339277, 0.892191, -0.449555, 0.0272891)
bones/61/rotation = Quaternion(-0.101533, 0.631208, -0.760955, 0.110521)
bones/62/rotation = Quaternion(0.00112308, 0.999946, -0.000254507, -0.0102997)
bones/64/rotation = Quaternion(-0.136478, 0.292419, 0.935189, 0.145897)
bones/65/rotation = Quaternion(0.0427974, 0.910342, -0.402514, -0.086194)
bones/66/rotation = Quaternion(0.128879, 0.617159, -0.76291, -0.143082)
bones/67/rotation = Quaternion(0.00140711, 0.999997, -0.000635186, -0.00206366)

[node name="CollisionShape3D" parent="Monster/skin_reaver/Armature_001/GeneralSkeleton/parasiteZombie/StaticBody3D" index="0"]
disabled = true

[node name="SpotLight3D" type="SpotLight3D" parent="Monster"]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 0, -0.00136817, 0)
visible = false
light_color = Color(1, 0.243137, 1, 1)
light_energy = 10.0
shadow_enabled = true
spot_range = 10.0
spot_angle = 57.46

[node name="Roar" type="AudioStreamPlayer3D" parent="Monster"]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, -0.0542281, -0.0406306, 0.0163279)
volume_db = -30.111
bus = &"SFX"

[node name="Dialog" type="AudioStreamPlayer3D" parent="Monster"]
stream = SubResource("AudioStreamRandomizer_7hop2")

[node name="CollisionShape3D" type="CollisionShape3D" parent="Monster"]
transform = Transform3D(2, 0, 0, 0, 2, 0, 0, 0, 2, -0.322442, 0.125953, 0)
shape = SubResource("BoxShape3D_nwc3h")

[node name="AnimationPlayer" type="AnimationPlayer" parent="."]
libraries = {
"": SubResource("AnimationLibrary_abcip")
}

[connection signal="button_pressed" from="RightController" to="." method="_on_right_controller_button_pressed"]
[connection signal="player_detected" from="Monster" to="." method="_on_monster_player_detected"]

[editable path="Camera/PlayerInteractor"]
[editable path="Monster/skin_reaver"]
